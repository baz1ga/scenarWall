<div id="page-content" x-data="tensionPage()" x-init="init()" class="space-y-6" x-cloak>
  <section class="space-y-6 max-w-5xl mx-auto">
    <div class="flex flex-col items-center gap-4 md:flex-row md:flex-wrap md:justify-center md:items-start">
      <div class="w-full md:max-w-3xl mx-auto rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-950 p-6 shadow-sm space-y-3">
        <div class="flex items-center justify-between">
          <div>
            <h2 class="text-lg font-semibold" x-text="tensionEnabled ? 'Barre de tension activée' : 'Barre de tension désactivée'"></h2>
          </div>
          <label class="relative inline-flex items-center cursor-pointer">
            <input type="checkbox" class="sr-only peer" x-model="tensionEnabled" @change="saveTensionConfig">
            <div class="w-11 h-6 bg-slate-700 peer-focus:outline-none rounded-full peer peer-checked:bg-emerald-500 transition"></div>
            <div class="absolute left-1 top-1 w-4 h-4 bg-white rounded-full transition peer-checked:translate-x-5"></div>
          </label>
        </div>
      </div>
      <div class="w-full md:max-w-3xl mx-auto rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-950 p-6 shadow-sm space-y-3">
        <p class="text-sm text-slate-400">Police de la barre de tension</p>
        <div class="grid gap-3 sm:grid-cols-2">
          <label class="flex items-center gap-2 rounded-lg border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-3 py-2 text-sm text-slate-900 dark:text-slate-100 cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-800">
            <input type="radio" class="text-emerald-500" name="tensionFont" value="Audiowide" x-model="tensionFont" @change="saveTensionConfig">
            <span style="font-family: 'Audiowide', sans-serif;" class="text-lg">Futuriste (Audiowide)</span>
          </label>
          <label class="flex items-center gap-2 rounded-lg border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-3 py-2 text-sm text-slate-900 dark:text-slate-100 cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-800">
            <input type="radio" class="text-emerald-500" name="tensionFont" value="Metal Mania" x-model="tensionFont" @change="saveTensionConfig">
            <span style="font-family: 'Metal Mania', cursive;" class="text-lg">Horrifique (Metal Mania)</span>
          </label>
          <label class="flex items-center gap-2 rounded-lg border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-3 py-2 text-sm text-slate-900 dark:text-slate-100 cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-800">
            <input type="radio" class="text-emerald-500" name="tensionFont" value="Rye" x-model="tensionFont" @change="saveTensionConfig">
            <span style="font-family: 'Rye', cursive;" class="text-lg">Saloon (Rye)</span>
          </label>
          <label class="flex items-center gap-2 rounded-lg border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-3 py-2 text-sm text-slate-900 dark:text-slate-100 cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-800">
            <input type="radio" class="text-emerald-500" name="tensionFont" value="Share Tech Mono" x-model="tensionFont" @change="saveTensionConfig">
            <span style="font-family: 'Share Tech Mono', monospace;" class="text-lg">Techno (Share Tech Mono)</span>
          </label>
          <label class="flex items-center gap-2 rounded-lg border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-3 py-2 text-sm text-slate-900 dark:text-slate-100 cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-800">
            <input type="radio" class="text-emerald-500" name="tensionFont" value="Bangers" x-model="tensionFont" @change="saveTensionConfig">
            <span style="font-family: 'Bangers', cursive;" class="text-lg">Cartoon (Bangers)</span>
          </label>
          <label class="flex items-center gap-2 rounded-lg border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-3 py-2 text-sm text-slate-900 dark:text-slate-100 cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-800">
            <input type="radio" class="text-emerald-500" name="tensionFont" value="Great Vibes" x-model="tensionFont" @change="saveTensionConfig">
            <span style="font-family: 'Great Vibes', cursive;" class="text-lg">Manuscrit (Great Vibes)</span>
          </label>
        </div>
      </div>
      <div class="w-full md:max-w-3xl mx-auto rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-950 p-6 shadow-sm space-y-4">
        <div class="flex items-center justify-between">
          <p class="text-sm text-slate-400">Personnaliser les niveaux</p>
        </div>
        <div class="space-y-2">
          <template x-for="level in ['level1','level2','level3','level4','level5']" :key="level">
            <div class="rounded-lg border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-3 py-2 text-sm text-slate-900 dark:text-slate-100">
              <div class="flex flex-wrap items-center gap-3">
                <span class="font-semibold" x-text="`Niveau ${level.replace('level','')}`"></span>
                <div class="ml-auto flex items-center gap-3 flex-wrap justify-end">
                  <div class="flex items-center gap-2">
                    <span class="text-xs text-slate-500 dark:text-slate-400">Label</span>
                    <input type="text" maxlength="4" class="w-20 rounded border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-2 py-1 text-sm text-slate-900 dark:text-slate-100" x-model="tensionLabels[level]" @change="saveTensionConfig">
                  </div>
                  <div class="flex items-center gap-2">
                    <span class="text-xs text-slate-500 dark:text-slate-400">Couleur</span>
                    <input type="color" class="h-9 w-12 rounded border border-slate-300 dark:border-slate-700 bg-transparent cursor-pointer" x-model="tensionColors[level]" @change="saveTensionConfig">
                  </div>
                  <div class="flex items-center gap-2 min-w-[160px]">
                    <span class="text-xs text-slate-500 dark:text-slate-400 whitespace-nowrap">Audio</span>
                    <select class="flex-1 rounded border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-2 py-1 text-sm text-slate-900 dark:text-slate-100"
                            x-model="tensionAudio[level]"
                            @change="saveTensionConfig">
                      <option :value="null">Aucun</option>
                      <template x-for="audio in audioFiles" :key="audio.name">
                        <option :value="audio.name" x-text="audio.name"></option>
                      </template>
                    </select>
                  </div>
                </div>
              </div>
            </div>
          </template>
        </div>
      </div>
    </div>
    <div class="text-sm" :class="tensionStatus === 'error' ? 'text-rose-500 dark:text-rose-400' : 'text-emerald-600 dark:text-emerald-300'" x-text="tensionMessage"></div>
  </section>
</div>
<script src="/js/admin/layout-loader.js"></script>
<script type="module" src="/admin/tension/tension.js" data-page-script></script>
